<div class="table-jdd">
    <hr>
    <span class="table-title-style" [translate]="title"></span>
    <app-loader [allPage]="false" [isLight]="true" [noText]="true" [active]="tableLoading"></app-loader>
    <table
        class="mat-table-demandes-acces"
        [attr.aria-label]="ariaLabel | translate" mat-table
        [dataSource]="dataSource"
        [hidden]="tableLoading || dataSource.data.length === 0"
        *ngIf="!tableLoading"
    >
        <!-- Date d'ajout du JDD -->
        <ng-container matColumnDef="addedDate">
            <th mat-header-cell *matHeaderCellDef class="table-header first-row">
                {{'personalSpace.project.tabs.datasets.openDatasets.columnAddedData'|translate}}
            </th>
            <td mat-cell *matCellDef="let element" class="text-center"> {{element.addedDate}} </td>
        </ng-container>

        <!-- Title du JDD -->
        <ng-container matColumnDef="title">
            <th mat-header-cell *matHeaderCellDef class="table-header second-row text-left">
                {{'personalSpace.project.tabs.datasets.openDatasets.columnDataset'|translate}}
            </th>
            <td mat-cell *matCellDef="let element" class="titre-jdd">
                <app-dataset-infos
                    [showLogo]="true"
                    [organizationName]="element?.organization_name"
                    [organizationId]="element?.datasetOrganizationId"
                    [resourceTitle]="element?.datasetTitle"
                    [isTabReuse]="true"
                    [popover]="myPopover"
                ></app-dataset-infos>
                <popover-content #myPopover placement="bottom" [closeOnClickOutside]="true">
                    <div class="popover-content-child">
                        <div class="popover-text-style">
                            <p class="firstParagraph">{{element?.datasetTitle}}</p>
                        </div>
                    </div>
                </popover-content>

            </td>
        </ng-container>

        <!-- Status Column -->
        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef class="table-header">
                {{'personalSpace.project.tabs.datasets.openDatasets.columnStatus'|translate}}
            </th>
            <td mat-cell *matCellDef="let element" class="text-center">
                {{element?.functional_status}}
            </td>
        </ng-container>

        <!-- Delete-img Column -->
        <ng-container matColumnDef="delete-img">
            <th mat-header-cell *matHeaderCellDef class="table-header">
            </th>
            <td mat-cell *matCellDef="let element" class="text-right">
                <img *ngIf="hasDeleteButton"
                     class="delete-img"
                     alt="{{'personalSpace.projectDatasets.delete.alt' | translate}}"
                     src='/assets/images/delete.png'
                     (click)="deleteAction(element)"
                />
            </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <div *ngIf="hasAddButton">
        <button
            mat-raised-button
            class="button mat-stroked-button add-link-button"
            [disabled]="disableAddButton"
            (click)="addAction()"
        >
            <mat-icon svgIcon="icon_add_blue" class="icon-add-jdd"></mat-icon>
            <span>{{'personalSpace.project.tabs.datasets.addButton' | translate}}</span>
        </button>
    </div>
</div>
